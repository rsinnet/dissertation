% Custom hyphenation
\hyphenation{equi-asymp-tot-ic}

% Superscripts
\newcommand{\ssth}{\textsuperscript{th}\xspace}

% Custom environments
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{definition}{Definition}
\newtheorem{exmp}{Example}
\newtheorem{remark}{Remark}

% Reference macros
\newcommand{\chapref}[1]{Chapter~\ref{#1}}
\newcommand{\defref}[1]{Definition~\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}
\newcommand{\secref}[1]{Section~\ref{#1}}
\newcommand{\lemref}[1]{Lemma~\ref{#1}}
\newcommand{\thmref}[1]{Theorem~\ref{#1}}
\newcommand{\propref}[1]{Proposition~\ref{#1}}
\newcommand{\tabref}[1]{Table~\ref{#1}}
\newcommand{\exmpref}[1]{Example~\ref{#1}}
\newcommand{\rmkref}[1]{Remark~\ref{#1}}
\newcommand{\fnref}[1]{\textsuperscript{\ref{#1}}}

% Math operations
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\lambdamax}{\lambda_{\mathrm{max}}}
\DeclareMathOperator*{\lambdamin}{\lambda_{\mathrm{min}}}
\DeclareMathOperator*{\blockdiag}{blk\,diag}

% Set of cyclical coordinates (Taurus)
\newcommand{\T}{\mathbb{T}}

% Set of integers and natural numbers
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}
\newcommand{\N}{\ensuremath{\mathbb{N}}}

% Sets and subsets of real numbers
\newcommand{\R}{\mathbb{R}}
\newcommand{\Rnn}{\R_{\geq 0}}
\newcommand{\Rpd}{\R_{> 0}}
\newcommand{\Rn}{\R^{n}}

% Reference frame
\newcommand{\Rb}{R_{b}}
\newcommand{\Rc}{R_{c}}
\newcommand{\Rnaught}{R_{0}}

% zero dynamics vector fields
\newcommand{\zdf}{f}
\newcommand{\zdg}{g}
\newcommand{\zdq}{q}
\newcommand{\zdw}{w}

% Partial derivative
\newcommand{\pd}[2]{\ensuremath{\frac{\partial{#1}}{\partial{#2}}}}

% General system coordinates
\newcommand{\x}{x}

% Mechanical system coordinates
\newcommand{\q}{q}
\newcommand{\dq}{\dot{\q}}
\newcommand{\ddq}{\ddot{\q}}

\newcommand{\qs}{\q_{s}}
\newcommand{\dqs}{\dq_{s}}

\newcommand{\qn}[1]{\q_{#1}}
\newcommand{\dqn}[1]{\dq_{#1}}

\newcommand{\qsn}[1]{\qn{s,#1}}
\newcommand{\dqsn}[1]{\dqn{s,#1}}

% Extended coordinates
\newcommand{\qe}{\q_{e}}
\newcommand{\dqe}{\dq_{e}}
\newcommand{\ddqe}{\ddq_{e}}

% Pre--post impact coordinates
\newcommand{\qp}{\q^{+}}
\newcommand{\qm}{\q^{-}}

\newcommand{\dqp}{\dq^{+}}
\newcommand{\dqm}{\dq^{-}}

% Zero dynamics coordinates
\newcommand{\zdx}{\xi}
\newcommand{\zdz}{\zeta}

\newcommand{\zdxm}{\zdx^{-}}
\newcommand{\zdzm}{\zdz^{-}}

\newcommand{\zdxp}{\zdx^{+}}
\newcommand{\zdzp}{\zdz^{+}}

% General system vector fields
\newcommand{\xf}{F}
\newcommand{\xg}{G}

% Indexed system vector fields
\newcommand{\xfv}{\xf_{v}}
\newcommand{\xgv}{\xg_{v}}

% Indexed reset map
\newcommand{\Deltav}{\Delta_{v}}

\newcommand{\xfbar}{{\bar \xf}}
\newcommand{\xgbar}{{\bar \xg}}

% Zero dynamics vector fields
\newcommand{\bigF}{\Phi}
\newcommand{\bigG}{\Gamma}

% Rotational velocity
\newcommand{\wc}{\omega_{c}}


% RES-CLF control gain
\newcommand{\resclfparam}{\varepsilon}

% Index variable used for discrete systems
\newcommand{\discreteindex}{k}

% Spaces for general system coordinates
\newcommand{\X}{\mathcal{X}}

% Spaces for mechanical system coordinates
\newcommand{\Q}{\mathcal{Q}}
\newcommand{\Qs}{\Q_{s}}

% Spaces for zero dynamics coordinates
\newcommand{\zdX}{\Xi}
\newcommand{\zdZ}{Z}

% Dynamics for mechanical robotic systems
\newcommand{\M}{M}
\newcommand{\B}{B}
\newcommand{\HCor}{H}
\newcommand{\CCor}{C}
\newcommand{\G}{G}

\newcommand{\Br}{\mathcal{B}}

% Admissible control sets
\newcommand{\K}{K}
\newcommand{\Keps}{\K_{\resclfparam}}

% Various dependent coordinate macros
\newcommand{\argsq}{(\q)}
\newcommand{\argsqt}{(\q\argt)}
\newcommand{\argsqtau}{(\q\argtau)}

\newcommand{\argsdq}{(\dq)}

\newcommand{\argsqdq}{(\q, \dq)}
\newcommand{\argsqdqu}{(\q, \dq, \uu)}
\newcommand{\argsqdqt}{(\q\argt, \dq\argt)}
\newcommand{\argsqdqtau}{(\q\argtau, \dq\argtau)}

\newcommand{\argsqm}{(\qm)}
\newcommand{\argsqmdqm}{(\qm, \dqm)}
\newcommand{\argsqdqW}{(\q, \dq, \W)}

\newcommand{\argsqdqm}{(\q, \dqm)}
\newcommand{\argsqdqp}{(\q, \dqp)}


\newcommand{\argt}{(t)}
\newcommand{\argtau}{(\tau)}
\newcommand{\argtzero}{(t_{0})}

\newcommand{\arx}{(\x)}
\newcommand{\arxt}{(\x\argt)}
\newcommand{\arxm}{(\xm)}

\newcommand{\xzero}{\x\argzero}
\newcommand{\arxzero}{(\xzero)}

\newcommand{\xk}{\x_{\discreteindex}}
\newcommand{\arxk}{(\xk)}
\newcommand{\nxk}{\|\xk\|}

\newcommand{\nxkzero}{\|\x_{0}\|}

\newcommand{\nxzero}{\|\xzero\|}
\newcommand{\nxt}{\|\x\argt\|}

\newcommand{\xknaught}{\x_{\discreteindex_{0}}}
\newcommand{\nxknaught}{\|\xknaught\|}

\newcommand{\tnaught}{t_{0}}
\newcommand{\argtnaught}{(\tnaught)}
\newcommand{\xtnaught}{x\argtnaught}
\newcommand{\nxtnaught}{\|\xtnaught\|}

\newcommand{\Shape}{S}

\newcommand{\ndim}{n}
\newcommand{\ncv}{m}
\newcommand{\Lag}{L}

\newcommand{\A}{\mathscr{A}}
\newcommand{\U}{\mathcal{U}}
\newcommand{\D}{D}
\newcommand{\De}{\D_{e}}
\newcommand{\Guard}{S}
\newcommand{\Orbit}{{\mathscr O}}

\newcommand{\Guardv}{\Guard_{v}}
\newcommand{\Dv}{\D_{v}}

\newcommand{\Transition}[3]{#1^{#2 \to #3}}

\newcommand{\GuardTransition}[2]{\Transition{\Guard}{#1}{#2}}
\newcommand{\DeltaTransition}[2]{\Transition{\Delta}{#1}{#2}}

\newcommand{\mueps}{\mu_{\resclfparam}}

\newcommand{\neps}{\left\|\tfrac{1}{\resclfparam}\right\|}
\newcommand{\nrho}{\|\rho\|}
\newcommand{\flowrho}{\flow^{\rho}}
\newcommand{\flowrhot}{\flow^{\rho}_{t}}

\newcommand{\E}{E}
\newcommand{\Es}{\E^{*}}
\newcommand{\Eref}{\E_{\mathrm{ref}}}
\newcommand{\Ec}{E_{c}}

\newcommand{\Lie}[1]{L_{#1}}

% Stored energy
\newcommand{\W}{W}
\newcommand{\Wdot}{\ensuremath{{\dot \W}}}
\newcommand{\Wp}{\ensuremath{\W^{+}}}

% Lyapunov function macros
\newcommand{\V}{V}
\newcommand{\dV}{{\dot V}}

\newcommand{\Ve}{V_{\resclfparam}}
\newcommand{\dVe}{{\dot V}_{\resclfparam}}

\newcommand{\Vbar}{\overline{V}}

\newcommand{\Vebar}{\Vbar_{\resclfparam}}
\newcommand{\VeS}{\left.\Ve\right|_{\S}}
\newcommand{\Vex}{\V_{\resclfparam, \zdX}}
\newcommand{\Vee}{\Vex}

\newcommand{\VP}{\V_{\Pe}}

% Poincare map macros 
\renewcommand{\P}{P}
\newcommand{\Pe}{\P_{\resclfparam}}
\newcommand{\Pex}{\Pe^{\zdx}}
\newcommand{\Pez}{\Pe^{\zdz}}

% Nominal CLF
\newcommand{\Vn}{\V_{\mathit{n}}}

% Extremum of control field
\newcommand{\lambdamaxG}{\lambda_{\mathrm{max}}}
\newcommand{\lambdaminG}{\lambda_{\mathrm{min}}}

% Maximum of dynamics vector field
\newcommand{\supF}{\Upsilon}

% Rotation groups
\newcommand{\SO}{\mathbf{SO}}
\newcommand{\SE}{\mathbf{SE}}

\newcommand{\Fnc}{F_{\mathrm{nc}}}
\newcommand{\Fnca}{\Fnc^{\mathrm{a}}}

\newcommand{\Fv}{W_{v}}

\newcommand{\orbit}{\mathscr{O}}

% More coordinates
\newcommand{\qst}{\q^{*}}
\newcommand{\dqst}{\dq^{*}}

\newcommand{\dx}{{\dot \x}}
\newcommand{\xst}{\x^{*}}
\newcommand{\xp}{\x^{+}}
\newcommand{\xm}{\x^{-}}
\newcommand{\xo}{\x^{\orbit}}

\newcommand{\dxm}{\dx^{-}}
\newcommand{\dxp}{\dx^{+}}

\newcommand{\nx}{\|\x\|}

\newcommand{\boldzero}{{\mathbf 0}}


\newcommand{\dzdx}{{\dot \zdx}}
\newcommand{\dzdz}{{\dot \zdz}}

\newcommand{\uu}{u}
\newcommand{\vv}{v}

\newcommand{\uum}{\uu^{-}}

\newcommand{\argsxuu}{(\x, \uu)}
\newcommand{\argsxuum}{(\xm, \uum)}


\newcommand{\limeps}{\lim_{\resclfparam \nearrow +\infty}}

\newcommand{\Poincare}{Poincar{\'e}}

\newcommand{\gap}{\vspace{.1cm}}

\newcommand{\CG}{H}

% Hybrid systems and hybrid control systems
\newcommand{\HS}{\Sigma}
\newcommand{\HSv}{\HS_{v}}
\newcommand{\HCS}{\HS^{c}}
\newcommand{\HCSv}{\HCS_{v}}

\newcommand{\HSbar}{{\overline \HS}}
\newcommand{\HCSbar}{\HSbar_{c}}

% Reset map
\newcommand{\ResetMap}{\Delta}

\newcommand{\DeltaX}{\ResetMap_{\zdX}}
\newcommand{\DeltaZ}{\ResetMap_{\zdZ}}

\newcommand{\Deltaxz}{\ResetMap\argsxz}
\newcommand{\nDeltaxz}{\left\|\ResetMap\argsxz\right\|}


% Equilibrium of zero dynamics
\newcommand{\xzst}{(0, \zdz^{*})}

% tau-time commands
\newcommand{\taueps}{\tau^{\resclfparam}}
\newcommand{\taurho}{\tau^{\rho}}


\newcommand{\argsxz}{(\zdx, \zdz)}
\newcommand{\argsxzti}[1]{(\zdx_{#1}\argt, \zdz_{#1}\argt)}
\newcommand{\argsxzizero}[1]{(\zdx_{#1}\argzero, \zdz_{#1}\argbzero)}
\newcommand{\argsDxzti}[1]{({\dot \zdx}_{#1}\argt, {\dot \zdz}_{#1}\argt)}
\newcommand{\argsx}{(\zdx)}
\newcommand{\argsz}{(\zdz)}

\newcommand{\argsxzm}{(\zdxm, \zdzm)}
\newcommand{\argsxzp}{(\zdxm, \zdzm)}

\newcommand{\argsxzt}{(\zdx\argt, \zdz\argt)}
\newcommand{\argsxztau}{(\zdx(\tau), \zdz(\tau))}
\newcommand{\argsmuxz}{(\mu_{1}, \mu_{2}, \zdx, \zdz)}
\newcommand{\argstxzi}[2]{(\zdx_{#2}(#1), \zdz_{#2}(#1))}
\newcommand{\argsxzprime}{(\zdx', \zdz')}
\newcommand{\argsxzstprime}{(\zdx', \zdz'-\zdzst)}

\newcommand{\argstxz}{(t, \zdx, \zdz)}

\newcommand{\argsxztzero}{(\zdx\argtzero, \zdz\argtzero)}

\newcommand{\zdzst}{\zdz^{*}}
\newcommand{\argsxzst}{(\zdx, \zdz - \zdzst)}

\newcommand{\nzdxz}{\left\|\argsxz\right\|}
\newcommand{\nzdxzst}{\left\|\argsxzst\right\|}

\newcommand{\nzdx}{\left|\zdx\right|}
\newcommand{\nzdz}{\left\|\zdz\right\|}
\newcommand{\nzdxzprime}{\left\|\argsxzprime\right\|}
\newcommand{\nzdxzstprime}{\left\|\argsxzstprime\right\|}

\newcommand{\nzdxt}{|\zdx\argt|}
\newcommand{\nzdxtau}{|\zdx\argtau|}
\newcommand{\nzdxzero}{|\zdx\argzero|}
\newcommand{\nzdzst}{\left\|\zdz - \zdzst\right\|}

\newcommand{\argzero}{(0)}
\newcommand{\argbzero}{(\boldzero)}
\newcommand{\argszero}{(0, \boldzero)}


% Time-to-impact functions
\newcommand{\TI}{T_{I}}
\newcommand{\TIe}{\TI^{\resclfparam}}
\newcommand{\Tst}{T^{*}}
\newcommand{\TB}{T_{B}}

\newcommand{\TIDelta}{\TI(\ResetMap\argsxz)}
\newcommand{\TIeDelta}{\TIe(\ResetMap\argsxz)}

% Lipschitz constans
\newcommand{\LDelta}{L_{\ResetMap}}
\newcommand{\LB}{L_{B}}
\newcommand{\LTI}{L_{\TI}}
\newcommand{\LTIeps}{L_{\TIe}(\resclfparam)}
\newcommand{\LP}{L_{P}}
\newcommand{\Le}{\Lambda(\resclfparam)}

% Custom parameters
\newcommand{\Ae}{A_{P}(\resclfparam)}
\newcommand{\ATI}{A_{\TI}}
\newcommand{\ATIe}{\ATI(\resclfparam)}
\newcommand{\bepsone}{\beta_{1}(\resclfparam)}
\newcommand{\bepstwo}{\beta_{2}(\resclfparam)}

% Flows to hybrid systems
\newcommand{\flow}{\phi}
\newcommand{\flowt}{\flow_{t}}
\newcommand{\flowtx}{\flowt^{x}}
\newcommand{\flowtz}{\flowt^{z}}

\newcommand{\floweps}{\flow^{\resclfparam}}
\newcommand{\flowepst}{\floweps_{t}}


\newcommand{\stabletube}{\Omega}
\newcommand{\zdmanifold}{\mathcal{Z}}

\newcommand{\vgap}{}

\newcommand{\PSection}{\mathcal{P}}

\newcommand{\etaeps}{\eta_{\resclfparam}}

\newcommand{\xrem}{(\q_{1}, \ \ldots, \ \q_{n}, \ \dq_{1}, \ \ldots, \
  \dq_{n-1})}
\newcommand{\xremW}{(\q_{1}, \ \ldots, \ \q_{n}, \ \dq_{1}, \ \ldots, \
  \dq_{n-1}, \ \W)}

\newcommand{\hnsf}{h_{\mathrm{nsf}}}

% from robotica
\newcommand{\sor}{\ensuremath{\mathrm{sor}}}
\newcommand{\tar}{\ensuremath{\mathrm{tar}}}

% Domain labeling
\newcommand{\DA}{\ensuremath{\mathit{ts}}}
\newcommand{\DB}{\ensuremath{\mathit{tl}}}
\newcommand{\DC}{\ensuremath{\mathit{hl}}}
\newcommand{\DD}{\ensuremath{\mathit{hs}}}
\newcommand{\C}{\ensuremath{\mathcal{C}}}

% Constraints
\newcommand{\sth}{\ensuremath{\mathrm{sth}}}
\newcommand{\stt}{\ensuremath{\mathrm{stt}}}
\newcommand{\nsh}{\ensuremath{\mathrm{nsh}}}
\newcommand{\nst}{\ensuremath{\mathrm{nst}}}
\newcommand{\csh}{\ensuremath{c_{\sth}}}
\newcommand{\cst}{\ensuremath{c_{\stt}}}
\newcommand{\cnsh}{\ensuremath{c_{\nsh}}}
\newcommand{\cnst}{\ensuremath{c_{\nst}}}

% Contact points for footed biped
\newcommand{\clh}{\ensuremath{c_{\mathit{lh}}}}
\newcommand{\clt}{\ensuremath{c_{\mathit{lt}}}}
\newcommand{\crh}{\ensuremath{c_{\mathit{rh}}}}
\newcommand{\crt}{\ensuremath{c_{\mathit{rt}}}}

% Labels for foot contact points
\newcommand{\cstk}{\ensuremath{\mathit{stk}\angle}}
\newcommand{\cnsk}{\ensuremath{\mathit{nsk}\angle}}
\newcommand{\cstth}{\ensuremath{\mathit{stth}}}
\newcommand{\csthh}{\ensuremath{\mathit{sthh}}}

\newcommand{\vo}{v}


% Unused macros
%\newcommand{\regressor}{\ensuremath{Y}}
%\newcommand{\regressorargs}{\regressor(\q, \dq, \ddq)}
%\newcommand{\regressorparam}{\Theta}

\newcommand{\Deltaq}{\ensuremath{\Delta_{\q}}}
\newcommand{\Deltadq}{\ensuremath{\Delta_{\dq}}}
\newcommand{\DeltaW}{\ensuremath{\Delta_{\W}}}

\newcommand{\psieps}{\psi^{\resclfparam}}


\usepackage[labelformat=simple]{subfig}
\renewcommand{\thesubfigure}{(\alph{subfigure})}
\makeatletter
\renewcommand{\p@subfigure}{\thefigure}
\renewcommand\@biblabel[1]{#1.}
\makeatother

% From IFAC
\newcommand{\csx}{\cs\xspace}
\newcommand{\cs}{controlled symmetries}
\newcommand{\Cs}{Controlled symmetries}
\newcommand{\Csx}{\Cs\xspace}
%\newcommand{\CS}{\tcase{\cs}}

\newcommand{\PD}{PD}
\newcommand{\PDx}{\PD\xspace}

% control gains
\newcommand{\gCS}{\ensuremath{\gamma}}
\newcommand{\gTS}{\ensuremath{\eta}}
\newcommand{\gSD}{\ensuremath{\Theta}}
%\newcommand{\gSW}{\ensuremath{\beta}}
\newcommand{\gLS}{\ensuremath{\alpha}}
\newcommand{\gSP}{\ensuremath{\beta}}
\newcommand{\gIO}{\ensuremath{\varepsilon}}

\newcommand{\Krg}{K^{\gCS}}
\newcommand{\Krt}{K^{\gSD}}
\newcommand{\Krm}{K^{\gSP}}

\newcommand{\Krgi}{\Krg_{i}}
\newcommand{\Krti}{\Krt_{i}}
\newcommand{\Krmi}{\Krm_{i}}


\newcommand{\fri}{f_{i}}
\newcommand{\frin}[1]{\fri^{#1}}

\newcommand{\frig}{\frin{\gCS}}
\newcommand{\frit}{\frin{\gSD}}
\newcommand{\frigt}{\frin{\gCS, \gSD}}
\newcommand{\frigtm}{\frin{\gCS, \gSD, \gSP}}

\newcommand{\gri}{g_{i}}

% hybrid flows
\newcommand{\cK}{\mathscr{K}}
\newcommand{\cI}{\mathscr{I}}
\newcommand{\cC}{\mathscr{C}}
